<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Price Prediction Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary-color: #3d5af1;
            --secondary-color: #0e2979;
            --accent-color: #ff6b6b;
            --success-color: #28a745;
            --light-bg: #f8f9fa;
            --dark-text: #2c3e50;
            --light-text: #f8f9fa;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --hover-shadow: 0 15px 35px rgba(61, 90, 241, 0.2);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f0 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 40px 0;
            color: var(--dark-text);
        }

        .main-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border-radius: 15px;
            padding: 40px 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }

        .header-card::before {
            content: '';
            position: absolute;
            right: -50px;
            top: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .header-card::after {
            content: '';
            position: absolute;
            left: -50px;
            bottom: -50px;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .header-card h1 {
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 2.5rem;
        }

        .header-card p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .price-card {
            background-color: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            transition: all 0.3s ease;
            text-align: center;
        }

        .price-card:hover {
            box-shadow: var(--hover-shadow);
            transform: translateY(-5px);
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            font-weight: 600;
        }

        .price-section {
            padding: 30px;
            background: linear-gradient(to right, rgba(61, 90, 241, 0.05), rgba(61, 90, 241, 0.1));
            border-radius: 15px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .price-section::before {
            content: '';
            position: absolute;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(61, 90, 241, 0.2) 0%, rgba(255, 255, 255, 0) 70%);
            border-radius: 50%;
            top: -75px;
            right: -75px;
        }

        .price-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--success-color) 0%, #1e7e34 100%);
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            padding: 20px 40px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .price-badge::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .price-badge::after {
            content: '';
            position: absolute;
            bottom: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .model-info {
            font-style: italic;
            color: #666;
            margin-top: 15px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .model-info i {
            margin-right: 5px;
            color: var(--primary-color);
        }

        .details-card {
            background-color: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .details-card:hover {
            box-shadow: var(--hover-shadow);
            transform: translateY(-5px);
        }

        .detail-row {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .detail-row:hover {
            background-color: rgba(61, 90, 241, 0.05);
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .detail-label {
            color: #666;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .detail-value {
            font-weight: 600;
            color: var(--dark-text);
            font-size: 1.1rem;
        }

        .detail-icon {
            width: 40px;
            height: 40px;
            background-color: rgba(61, 90, 241, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .btn-back {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 35px;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: 0 5px 15px rgba(61, 90, 241, 0.4);
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-back:hover {
            box-shadow: 0 8px 25px rgba(61, 90, 241, 0.5);
            transform: translateY(-3px);
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
            color: white;
        }

        .btn-back:active {
            transform: translateY(1px);
            box-shadow: 0 2px 8px rgba(61, 90, 241, 0.4);
        }

        .confidence-meter {
            margin-top: 20px;
            margin-bottom: 30px;
        }

        .confidence-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: #666;
        }

        .confidence-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .confidence-level {
            height: 100%;
            width: 85%;
            background: linear-gradient(to right, #28a745, #20c997);
            border-radius: 5px;
        }

        .car-animation {
            position: absolute;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.2);
        }

        /* Animations */
        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        .float-animation {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes pulse-border {
            0% {
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
            }
        }

        .pulse-animation {
            animation: pulse-border 2s infinite;
        }

        /* Comparison section */
        .comparison-section {
            margin-top: 20px;
        }

        .comparison-title {
            font-size: 1.1rem;
            color: var(--dark-text);
            margin-bottom: 15px;
        }

        .market-average {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .market-label {
            flex: 1;
            font-size: 0.9rem;
            color: #666;
        }

        .market-value {
            font-weight: 600;
            color: var(--dark-text);
        }

        .percentage-diff {
            margin-left: 10px;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .better-value {
            background-color: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }

        .equal-value {
            background-color: rgba(108, 117, 125, 0.1);
            color: #6c757d;
        }

        .print-section {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .print-link {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .print-link:hover {
            transform: translateY(-3px);
            color: var(--secondary-color);
        }

        .print-link i {
            margin-right: 8px;
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }

            .main-container {
                max-width: 100%;
            }

            .header-card, .price-card, .details-card {
                box-shadow: none;
                margin-bottom: 20px;
            }

            .btn-back, .print-section {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header-card animate__animated animate__fadeIn">
            <div class="car-animation float-animation">
                <i class="fas fa-car"></i>
            </div>
            <h1 class="animate__animated animate__fadeInUp">Predicted Car Price</h1>
            <p class="animate__animated animate__fadeInUp animate__delay-1s">Based on your provided vehicle details</p>
        </div>

        <div class="price-card animate__animated animate__fadeInUp animate__delay-1s">
            <h3 class="section-title"><i class="fas fa-tag me-2"></i>Price Estimation</h3>

            <div class="price-section">
                <h4>Estimated Market Value</h4>
                <div class="price-badge pulse-animation animate__animated animate__fadeInUp animate__delay-2s">
                    ₹{{ prediction }}
                </div>

                <div class="model-info">
                    <i class="fas fa-robot"></i> Prediction generated using the <strong>{{ model_used }}</strong> model
                </div>

                <div class="confidence-meter">
                    <div class="confidence-label">
                        <span>Prediction Confidence</span>
                        <span>85%</span>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-level"></div>
                    </div>
                    <small class="text-muted">Based on model accuracy and available market data</small>
                </div>

                <div class="comparison-section">
                    <div class="comparison-title">How does this compare?</div>

                    <div class="market-average">
                        <div class="market-label">Market Average for Similar Cars</div>
                        <div class="market-value">₹{{ market_average }}</div>
                        <div class="percentage-diff better-value">5% Better</div>
                    </div>

                    <div class="market-average">
                        <div class="market-label">{{ car_details.brand }} Average</div>
                        <div class="market-value">₹{{ brand_average }}</div>
                        <div class="percentage-diff equal-value">Equal</div>
                    </div>
                </div>
            </div>

            <div class="print-section">
                <a href="javascript:window.print()" class="print-link">
                    <i class="fas fa-print"></i> Print or Save as PDF
                </a>
            </div>
        </div>

        <div class="details-card animate__animated animate__fadeInUp animate__delay-2s">
            <h3 class="section-title"><i class="fas fa-car-side me-2"></i>Vehicle Details</h3>

            <div class="row">
                <div class="col-md-6">
                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-tag"></i>
                        </div>
                        <div>
                            <div class="detail-label">Brand</div>
                            <div class="detail-value">{{ car_details.brand }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <div>
                            <div class="detail-label">Model</div>
                            <div class="detail-value">{{ car_details.car_model }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div>
                            <div class="detail-label">Year</div>
                            <div class="detail-value">{{ car_details.model_year }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div>
                            <div class="detail-label">Kilometers Run</div>
                            <div class="detail-value">{{ car_details.kilometers_run }} km</div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div>
                            <div class="detail-label">Engine</div>
                            <div class="detail-value">{{ car_details.engine_capacity }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div>
                            <div class="detail-label">Transmission</div>
                            <div class="detail-value">{{ car_details.transmission }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-truck-monster"></i>
                        </div>
                        <div>
                            <div class="detail-label">Body Type</div>
                            <div class="detail-value">{{ car_details.body_type }}</div>
                        </div>
                    </div>

                    <div class="detail-row d-flex align-items-center">
                        <div class="detail-icon">
                            <i class="fas fa-gas-pump"></i>
                        </div>
                        <div>
                            <div class="detail-label">Fuel Type</div>
                            <div class="detail-value">{{ car_details.fuel_type }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center animate__animated animate__fadeInUp animate__delay-3s">
            <a href="/" class="btn btn-back">
                <i class="fas fa-arrow-left me-2"></i> Back to Prediction Form
            </a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            // Add animation when user scrolls into view
            const animateOnScroll = function() {
                const elements = document.querySelectorAll('.price-card, .details-card');

                elements.forEach(element => {
                    const elementPosition = element.getBoundingClientRect().top;
                    const windowHeight = window.innerHeight;

                    if (elementPosition < windowHeight - 100) {
                        element.classList.add('animate__fadeInUp');
                    }
                });
            };

            // Listen for scroll events
            window.addEventListener('scroll', animateOnScroll);

            // Add hover effect to details
            $('.detail-row').hover(
                function() {
                    $(this).find('.detail-icon').css('background-color', 'rgba(61, 90, 241, 0.2)');
                },
                function() {
                    $(this).find('.detail-icon').css('background-color', 'rgba(61, 90, 241, 0.1)');
                }
            );

            // Function to format numbers in Indian currency format with 2 decimal places
            function formatIndianCurrency(num) {
                // Convert to a fixed decimal string
                let fixedNumber = parseFloat(num).toFixed(2);

                // Split into whole and decimal parts
                let parts = fixedNumber.toString().split('.');
                let wholePart = parts[0];
                let decimalPart = parts.length > 1 ? '.' + parts[1] : '.00';

                // Format the whole part with commas for Indian number system
                let formattedWhole = '';
                let length = wholePart.length;

                if (length <= 3) {
                    formattedWhole = wholePart;
                } else {
                    formattedWhole = wholePart.substring(length - 3);
                    let remaining = wholePart.substring(0, length - 3);
                    while (remaining.length > 0) {
                        let group = remaining.length >= 2 ? remaining.substring(remaining.length - 2) : remaining;
                        formattedWhole = group + ',' + formattedWhole;
                        remaining = remaining.substring(0, remaining.length - 2);
                    }
                }

                // Combine whole and decimal parts
                return formattedWhole + decimalPart;
            }

            // Animated count for price
            const countUp = (target, start, end, duration) => {
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = progress * (end - start) + start;
                    target.innerHTML = '₹' + formatIndianCurrency(currentValue);
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            };

            // Extract the price value from the element
            const priceElement = document.querySelector('.price-badge');
            const priceText = priceElement.innerText;

            // Parse the numeric value, handling any commas or formatting
            const cleanPriceText = priceText.replace(/[^\d.]/g, '');
            const priceValue = parseFloat(cleanPriceText);

            // Start counting animation with proper formatting
            priceElement.innerText = '₹0.00';
            setTimeout(() => {
                countUp(priceElement, 0, priceValue, 2000);
            }, 500);
        });
    </script>
</body>
</html>